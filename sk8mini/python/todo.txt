

listing to starboard

when approaching a cw mark
	the error to starboard has the boat aimed right at the cone
	as the error gets greater, so the correction gets greater
	so now it is aimed away to port
	then it enters the arc but is too far out to port
	so it makes a circle to port of the mark, never goes around the mark, never gets to end theta

	in fact,
	in one test this morning, 
	it missed the end point of a line,
	and went about seemingly in a circle around the mark
	just using the stay-on-course logic of correcting the bearing towards the end point

	now it did it a second time, but went the wrong dirction for the arc
	so we need some logic that forces it into the correct rdir
	before going for the endpoint of the arc

	in the same way we use theta for an arc
	why not use a perpendicular line for a line
	know when we discover we have crossed the line,
	then measure how far from the endpoint we are to port or starboard

	the reason it misses the end-of-line point
	is because it is listed so far to starboard, true?

	comparing bearing to heading
		the longer the distance to the endpoint
		the smaller the error, the smaller the correction
	we need to look at a waypoint at a shorter distance in front of the vehicle
		to get a larger error and a quicker correction

	ditto for going around marks
		we need waypoints along the arc, to make him go in the right rdir

when approaching a ccw mark
	?, same in reverse

replay
	manual control
		step forward and back
		speed up, slow down
	display log simultaneously



possible solutions:
1 more helm bias: fixed amount or integral

2 keep on course around the arc, 
	bearing should point straight to the endpoint of the arc
	error will be great, so helm will be at maximum
	its only coincidence that the vehicle follows an arc

3 when in a cw arc leg, keep the helm to starboard




measure time diff between onSensor and onPhoto
Timing
	AWACS .3 sec, is limiting factor camera or http?
	Skate 
		Get photo, donut and cones. Timing controlled by AWACS loop: .3 secs
		Get sensor, read settle time? Is it conflicting with send command?
	Navigation 
		1st leg
		Last leg
		Cones changed plotRoute
		Navigator
			Get cones from photo
			On change, re-plotRoute
			Keep sides and rdirs, unless route becomes impossible
	Pilot
		Stay on course controlled by getPhoto
	UI
		Fps 20, wasted because no changes to see except when photo changes





future option: add deadReckoning on change in heading or roll, between onSensor and onPhoto.  NO.  skip deadReckoning and instead go to to awacs direct comm of donut to skate

onPhoto()
	donut x,y, t
	donutpos
	cbaseposhj
	timestarthttp
	timereceivedbyskate

onSensor()
	heading, roll, t

caplog
	source - onPhoto, onAHRS
	position	
	heading
	roll
	speed - can be calculated from helm and roll, or from newpos vs prevpos line vs arc 
	timestamp
	revised_position

Photo
	donut
	position - calculated from donut, heading, roll
	heading - copied from sensor log at matching timestamp
	roll - copied from log at matching timestamp
	speed - copied from log at matching timestamp
	timestamp - photo received from awacs
	timehttp - time http request sent

Sensor
	heading - including declination
	roll
	timestamp - signal received from BRO055

options before go, after go
	turn autopilot off
	use left and right arrows to move helm
	display helm, roll

-------------------------------
vote

New question
new answer 
Edit question
Delete question
Approve question
Flagging
Peer review of each question
AI to match duplicate questions and answers

List of props
new...  (new question)

List of Choices
Other...  (new answer)

operations:
	Edit question
	Delete question
	Approve question
	Flagging
	Peer review of each question
	AI to match duplicate questions and answers

Should the USA provoke Russia into a nuclear war?

How much money should the US government borrow everyday to give to Zelensky for Ukraine military operations?
ditto Netanyahu for Israeli military operations?
ditto Sudan, Yemen, Syria, Libya, Jordan, Saudi Arabia

---------------------------

Same owner
	Maggie May
	Camel toe
	Club fate 

Soi 5 pratumniak
	Cat flaps

Third Road
	Kings club


