<!doctype html>
<html>
	<head>
		<meta http-equiv=Content-Type content='text/html; charset=UTF-8'>
		<meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1'>
		<title>Skateboard Monitor</title>
		<style>[hidden] {display:none ! important;}</style>
	<script type='text/javascript'>
		function xml_http_post(url, data) {
			var req = new XMLHttpRequest();
			req.open('POST', url, true);
			req.onreadystatechange = function() {
				if (req.readyState == 4) {
					console.log(req.responseText);
				}
			}
			req.send(data);
		}
		
		window.addEventListener('load', function() {
			var list = document.querySelectorAll('button');
			list.forEach(function(el) {
				el.addEventListener('click', function(e) {
					var action = e.currentTarget.id;
					xml_http_post('svc/'+action, action)
				});
			});
		});

/*
once every second, 
	call for map data
	draw the map

mapdata = {
	state:'stopped',
	dronebattery:99,
	wheelbattery:87,
	judsonbattery:44,
	arduinobattery:63,
	altitude:800,
	h:300,
	w:600,
	skate:{x:23,y:40},
	drone:{x:150,y:300},
	origin:{x:0, y:6},
	cones: [
		{x:30,y:60},
		{x:30,y:60},
		{x:30,y:60}
	]
};

*/

	</script>
	</head>	
	<body>
		<p>Skateboard Monitor</p>
		<button id='go'>Go</button>
		<button id='stop'>Stop</button>
		<br/>
		<button id='emer'>Emergency Stop!</button>
		<div id='map'></div>
	</body>
</html>
